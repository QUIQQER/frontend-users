<section>

    {if $usernameSetting != 'none'}
        <fieldset class="quiqqer-registration-username">
            <label>
                <span class="quiqqer-registration-field-title">
                    {locale group="quiqqer/frontend-users" var="control.registration.label.username"}{if $usernameSetting == 'required'} *{/if}
                </span>

                <input type="text" name="username"
                       class="quiqqer-registration-field-element{if isset($invalidFields['username'])} quiqqer-registration-field-error{/if}"
                       value="{if isset($fields['username'])}{$fields['username']}{/if}"
                       maxlength="40"
                       {if $usernameSetting == 'required'}required{/if}/>
                {if isset($invalidFields['username'])}
                    <span class="quiqqer-registration-field-error-msg">
                        {$invalidFields['username']->getMsg()}
                    </span>
                {/if}
            </label>
        </fieldset>
    {/if}

    <fieldset class="quiqqer-registration-email">
        <label>
            <span class="quiqqer-registration-field-title">
                {locale group="quiqqer/frontend-users" var="registrars.email.label.email"} *
            </span>

            <input type="email" name="email"
                   value="{if isset($fields['email'])}{$fields['email']}{/if}"
                   class="quiqqer-registration-field-element{if isset($invalidFields['email'])} quiqqer-registration-field-error{/if}"
                   maxlength="40"
                   required/>
            {if isset($invalidFields['email'])}
            <span class="quiqqer-registration-field-error-msg">
                    {$invalidFields['email']->getMsg()}
                </span>
            {/if}
        </label>
    </fieldset>

    <fieldset class="quiqqer-registration-emailConfirm">
        <label>
            <span class="quiqqer-registration-field-title">
                {locale group="quiqqer/frontend-users" var="registrars.email.label.email_confirm"} *
            </span>

            <input type="email" name="emailConfirm"
                   value="{if isset($fields['emailConfirm'])}{$fields['emailConfirm']}{/if}"
                   class="quiqqer-registration-field-element{if isset($invalidFields['email'])} quiqqer-registration-field-error{/if}"
                   maxlength="40"
                   required/>
        </label>
    </fieldset>

    {if $passwordInput != 'none'}
        <fieldset class="quiqqer-registration-password">
            <label>
                <span class="quiqqer-registration-field-title">
                    {locale group="quiqqer/frontend-users" var="registrars.email.label.password"} *
                </span>

                <input type="password" name="password"
                       value="{if isset($fields['password'])}{$fields['password']}{/if}"
                       class="quiqqer-registration-field-element{if isset($invalidFields['password'])} quiqqer-registration-field-error{/if}"
                       autocomplete="off"
                       maxlength="200"
                       required/>
                {if isset($invalidFields['password'])}
                <span class="quiqqer-registration-field-error-msg">
                        {$invalidFields['password']->getMsg()}
                </span>
                {/if}
            </label>
        </fieldset>

        <fieldset class="quiqqer-registration-passwordConfirm">
            <label>
                <span class="quiqqer-registration-field-title">
                    {locale group="quiqqer/frontend-users" var="registrars.email.label.password_confirm"} *
                </span>

                <input type="password" name="passwordConfirm"
                       value="{if isset($fields['passwordConfirm'])}{$fields['passwordConfirm']}{/if}"
                       class="quiqqer-registration-field-element{if isset($invalidFields['password'])} quiqqer-registration-field-error{/if}"
                       autocomplete="off"
                       maxlength="200"
                       required/>
            </label>
        </fieldset>
        {if $passwordInput == 'validation'}
            <div class="quiqqer-registration-passwordstrength"></div>
        {/if}
    {/if}

</section>

{if $addressTemplate}
    <h2>Adresse</h2>
    <section class="quiqqer-registration-address{if !$showAddress} quiqqer-frontendUsers__hidden{/if}">
        {$addressTemplate}
    </section>
{/if}

<section>
    {if $useCaptcha}
        {if $jsRequired}
            <noscript>
                <style>
                    .quiqqer-frontendUsers__noScriptHidden {
                        display: none;
                    }
                </style>

                {locale group="quiqqer/frontend-users" var="registrars.email.javascript_required"}
            </noscript>
        {/if}

        <label>
            <span class="quiqqer-registration-field-title">
                {locale group="quiqqer/frontend-users" var="registrars.email.label.captcha"} *
            </span>

            {$Captcha->create()}
            <input type="hidden" name="captchaResponse"/>
        </label>
    {/if}

    <div class="quiqqer-registration-submit quiqqer-frontendUsers__noScriptHidden">
        <button type="submit"
                class="btn-green grid-60 mobile-grid-100 push-40 mobile-push-0"{if $useCaptcha && $jsRequired} disabled{/if}>
            {locale group="quiqqer/frontend-users" var="registrars.email.btn.submit"}
        </button>
    </div>
</section>