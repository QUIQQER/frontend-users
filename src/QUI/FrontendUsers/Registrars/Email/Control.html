<section>

    {if $usernameSetting != 'none'}
        <fieldset class="quiqqer-registration-username">
            <label>
                <span class="quiqqer-registration-field-title">
                    {locale group="quiqqer/frontend-users" var="control.registration.label.username"}{if $usernameSetting == 'required'} *{/if}
                </span>

                {assign var=userNameRequired value=""}
                {if $usernameSetting == 'required'}
                    {assign var=userNameRequired value="required"}
                {/if}

                <input type="text" name="username"
                       class="quiqqer-registration-field-element{if isset($invalidFields['username'])} quiqqer-registration-field-error{/if}"
                       value="{if isset($fields['username'])}{$fields['username']}{/if}"
                       maxlength="40"
                       {$userNameRequired}
                />
                {if isset($invalidFields['username'])}
                <span data-name="error-message"
                      role="alert"
                      class="q-message q-message-error content-message-error"
                >
                    {$invalidFields['username']->getMsg()}
                </span>
                {/if}
            </label>
        </fieldset>
    {/if}

    <fieldset class="quiqqer-registration-email">
        <label>
            <span class="quiqqer-registration-field-title">
                {locale group="quiqqer/frontend-users" var="registrars.email.label.email"} *
            </span>

            <input type="email" name="email"
                   value="{if isset($fields['email'])}{$fields['email']}{/if}"
                   class="quiqqer-registration-field-element{if isset($invalidFields['email'])} quiqqer-registration-field-error{/if}"
                   maxlength="40"
                   required
            />
            {if isset($invalidFields['email'])}
            <span data-name="error-message"
                  role="alert"
                  class="q-message q-message-error content-message-error"
            >
                {$invalidFields['email']->getMsg()}
            </span>
            {/if}
        </label>
    </fieldset>

    {if $passwordInput != 'none'}
        <fieldset class="quiqqer-registration-password">
            <label>
                <span class="quiqqer-registration-field-title">
                    {locale group="quiqqer/frontend-users" var="registrars.email.label.password"} *
                </span>

                <input type="password"
                       name="password"
                       value="{if isset($fields['password'])}{$fields['password']}{/if}"
                       class="quiqqer-registration-field-element{if isset($invalidFields['password'])} quiqqer-registration-field-error{/if}"
                       autocomplete="off"
                       maxlength="200"
                       required
                />
                {if isset($invalidFields['password'])}
                <span data-name="error-message"
                      role="alert"
                      class="q-message q-message-error content-message-error"
                >
                    {$invalidFields['password']->getMsg()}
                </span>
                {/if}
            </label>
        </fieldset>

        {if $passwordInput == 'validation'}
            <div class="quiqqer-registration-passwordstrength"></div>
        {/if}
    {/if}
</section>

{if $addressTemplate}
    <h2>Adresse</h2>
    <section class="quiqqer-registration-address{if !$showAddress} quiqqer-frontendUsers__hidden{/if}">
        {$addressTemplate}
    </section>
{/if}

<section>
    {if $useCaptcha}
        {if $jsRequired}
            <noscript>
                <style>
                    .quiqqer-frontendUsers__noScriptHidden {
                        display: none;
                    }
                </style>

                {locale group="quiqqer/frontend-users" var="registrars.email.javascript_required"}
            </noscript>
        {/if}

        <label>
            <span class="quiqqer-registration-field-title">
                {locale group="quiqqer/frontend-users" var="registrars.email.label.captcha"} *
            </span>

            {$Captcha->create()}
            <input type="hidden" name="captchaResponse"/>
        </label>
    {/if}

    <div class="quiqqer-registration-submit quiqqer-frontendUsers__noScriptHidden">
        {assign var=submitDisabled value=""}
        {if $useCaptcha && $jsRequired}
        {assign var=submitDisabled value="disabled"}
        {/if}

        <button
            type="submit"
            data-type="registration"
            {$submitDisabled}
        >
            <span class="fa fa-envelope"></span>
            <span>{locale group="quiqqer/frontend-users" var="registrars.email.btn.submit"}</span>
        </button>
    </div>
</section>