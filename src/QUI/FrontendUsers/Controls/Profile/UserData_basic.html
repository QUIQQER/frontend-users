<noscript>
    <style>
        [data-hidden] {
            display: inline-block;
        }
    </style>
</noscript>

{template_event name="quiqqer::frontend-users::profile::user-data-begin" User=$User Address=$Address}

{if $changeMailRequest}
<div class="content-message-information">
    {locale group="quiqqer/frontend-users" var="profile.userdata.message.change_email_request"}
</div>
{/if}

{if $action == 'change_email_success'}
<div class="content-message-success">
    {locale group="quiqqer/frontend-users" var="profile.userdata.message.change_email_success"}
</div>
{/if}

{if $action == 'change_email_error'}
<div class="content-message-error">
    {locale group="quiqqer/frontend-users" var="profile.userdata.message.change_email_error"}
</div>
{/if}

<section class="qui-frontendUsers-userdata-address">
    <header>
        <h2>{locale group="quiqqer/frontend-users" var="profile.userdata.title"}</h2>
    </header>

    {template_event name="quiqqer::frontend-users::profile::customer-data-begin" User=$User Address=$Address}

    <label class="qui-form-label">
        <span class="qui-form-label__text">
            {locale group="quiqqer/frontend-users" var="profile.userdata.firstname"}
        </span>
        <input type="text"
               name="firstname"
               autocomplete="given-name"
               class="qui-form-label__input"
               value="{$User->getAttribute('firstname')|escape:'html'}"
        />
    </label>

    <label class="qui-form-label">
        <span class="qui-form-label__text">
            {locale group="quiqqer/frontend-users" var="profile.userdata.lastname"}
        </span>
        <input type="text"
               name="lastname"
               autocomplete="family-name"
               class="qui-form-label__input"
               value="{$User->getAttribute('lastname')|escape:'html'}"
        />
    </label>

    <label class="qui-form-label">
        <span class="qui-form-label__text">
            {locale group="quiqqer/frontend-users" var="street_no"}
        </span>

        {if $Address->getAttribute('street_no') === ''}
        <input type="text" name="street" value="" autocomplete="street-address" class="qui-form-label__input"/>
        <input type="text" name="street_number" value="" class="qui-form-label__input"/>
        {else}
        <input type="text"
               name="street_no"
               autocomplete="street-address"
               class="qui-form-label__input"
               value="{$Address->getAttribute('street_no')|escape:'html'}"
        />
        {/if}
    </label>

    <label class="qui-form-label">
        <span class="qui-form-label__text">
            {locale group="quiqqer/frontend-users" var="zip"}
        </span>
        <input type="text"
               name="zip"
               autocomplete="postal-code"
               class="qui-form-label__input"
               value="{$Address->getAttribute('zip')|escape:'html'}"
        />
    </label>

    <label class="qui-form-label">
        <span class="qui-form-label__text">
            {locale group="quiqqer/frontend-users" var="city"}
        </span>
        <input type="text"
               name="city"
               autocomplete="address-level2"
               class="qui-form-label__input"
               value="{$Address->getAttribute('city')|escape:'html'}"
        />
    </label>

    <label class="qui-form-label">
        <span class="qui-form-label__text">
            {locale group="quiqqer/system" var="country"}
        </span>
        <span class="quiqqer-frontendUsers-userdata-address-country-select">
            {control
            name="country"
            control="QUI\Countries\Controls\Select"
            selected=$Address->getAttribute('country')
            }
        </span>
    </label>

    <label class="qui-form-label">
        <span class="qui-form-label__text">
            {locale group="quiqqer/system" var="phone"}
        </span>
        <input type="text"
               name="tel"
               autocomplete="address-phone"
               class="qui-form-label__input"
               value="{$Address->getPhone()|escape:'html'}"
        />
    </label>

    {template_event name="quiqqer::frontend-users::profile::customer-data-end" User=$User Address=$Address}
</section>

{template_event name="quiqqer::frontend-users::profile::user-data-middle" User=$User Address=$Address}

<section class="qui-frontendUsers-userdata-additional">
    <header>
        <h2>{locale group="quiqqer/frontend-users" var="profile.userdata.additional.title"}</h2>
    </header>

    <label class="qui-form-label">
        <span class="qui-form-label__text">
           {locale group="quiqqer/frontend-users" var="profile.userdata.dateOfBirth"}
        </span>

        {assign var=day value=$User->getAttribute('birthday')|date_format:"%d"}
        {assign var=month value=$User->getAttribute('birthday')|date_format:"%m"}
        {assign var=year value=$User->getAttribute('birthday')|date_format:"%Y"}

        <div class="package-intranet-profile-birthday">
            {birthday type="day"
            name="birth_day"
            id="intranet-profile-birthday-day"
            value=$day
            class="qui-form-label__input"
            }

            {birthday type="month"
            name="birth_month"
            id="intranet-profile-birthday-month"
            value=$month
            class="qui-form-label__input"
            }

            {birthday type="year"
            name="birth_year"
            id="intranet-profile-birthday-year"
            value=$year
            class="qui-form-label__input"
            }
        </div>
    </label>

    {if $username}
    <label class="qui-form-label">
        <span class="qui-form-label__text">
            {locale group="quiqqer/frontend-users" var="profile.userdata.username"}
        </span>
        <input name="username" value="{$User->getUsername()}" class="qui-form-label__input"/>
    </label>
    {/if}

    {if $showLanguageChangeInProfile}
    <label class="qui-form-label">
        <span class="qui-form-label__text">
            {locale group="quiqqer/frontend-users" var="profile.userdata.language"}
        </span>
        <div class="quiqqer-frontendUsers-userdata-language">
            <input data-qui="controls/lang/Select" name="language" value="{$User->getLang()}" class="qui-form-label__input"/>
        </div>
    </label>
    {/if}

    <label class="qui-form-label">
        <span class="qui-form-label__text">
            {locale group="quiqqer/frontend-users" var="profile.userdata.email"}
        </span>
        <div class="quiqqer-frontendUsers-userdata-email">
            <input name="email" autocomplete="email" class="qui-form-label__input"
                   value="{$User->getAttribute('email')|escape:'html'}"
                   disabled
            />
            <span class="fa fa-edit quiqqer-frontendUsers-userdata-email-edit" data-name="email-edit"></span>
        </div>
    </label>

    <label class="qui-frontendUsers-userdata-email-new" data-name="email-new" data-hidden>
        <span class="quiqqer-frontendUsers-userdata-label">
            {locale group="quiqqer/frontend-users" var="profile.userdata.email_new"}
        </span>
        <input name="emailNew"/>
        <span class="quiqqer-frontendUsers-userdata-email-new-hint">
        {locale group="quiqqer/frontend-users" var="profile.userdata.email_new_hint"}
    </span>
    </label>
</section>

{template_event name="quiqqer::frontend-users::profile::user-data-end" User=$User Address=$Address}

<button type="submit" class="quiqqer-frontendUsers-userdata-saveButton">
    {locale group="quiqqer/frontend-users" var="profile.userdata.save"}
</button>

{template_event name="quiqqer::frontend-users::profile::user-data-last" User=$User Address=$Address}
