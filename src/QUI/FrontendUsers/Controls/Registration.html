<noscript>
    <style>
        .quiqqer-frontendUsers-controls-registration-locked {
            display: none !important;
        }
    </style>
</noscript>

{if isset($fireUserActivationEvent)}
<script>
    require(['qui/QUI'], function(QUI) {
        (function() {
            QUI.fireEvent('quiqqerFrontendUsersUserActivate', [
                '{$User->getUUID()}',
                '{$registrarHash}',
                '{$registrarType}'
            ]);
        }).delay(200);
    });
</script>
{/if}

{if $success}
    <div class="content-message-success">
        {if !$instantRedirect}
            {$Registrar->getSuccessMessage()}
        {/if}

        {if $redirectUrl || $instantReload}
        <div class="quiqqer-frontendUsers-redirect"
             {if !empty($redirectUrl)}data-url="{$redirectUrl}"{/if}
             data-instant="{if $instantRedirect}1{else}0{/if}"
             data-reload="{if $instantReload}1{else}0{/if}"
        >
            {if !$instantRedirect && !$instantReload}
                {locale group="quiqqer/frontend-users" var="control.registration.auto_redirect" url=$redirectUrl}
            {/if}
        </div>
        {elseif $nextLinksText}
        <p class="quiqqer-frontendUsers-controls-registration-nextlinks">
            {$nextLinksText}
        </p>
        {/if}
    </div>

    {if $Login}
        {$Login->create()}
    {/if}

    {template_event name="quiqqer::frontendUsers::registrationSuccess"}

{elseif $Registrar && isset($registrationStatus) && $registrationStatus === 2}
    <div class="content-message-information">
        {$Registrar->getPendingMessage()}
    </div>

    {template_event name="quiqqer::frontendUsers::registrationPending"}
{else}
    {if isset($error) && !$redirectUrl}
    <div class="content-message-error">
        {$error}
    </div>

    {template_event name="quiqqer::frontendUsers::registrationError"}

    {/if}

    {if !isset($isGeneralError)}
        {if $socialRegistrars->isEmpty() && $mailRegistrars->isEmpty()}
        <div class="content-message-information">
            {locale group="quiqqer/frontend-users" var="control.registration.registration_disabled"}
        </div>
        {else}
        <div class="quiqqer-frontendUsers-controls-registration">
            {foreach $socialRegistrars as $registrar}
            <!-- social registrations -->
            <form action=""
                  method="POST"
                  class="quiqqer-frontendUsers-controls-registration-registrar"
                  data-registrar="{$registrar->getHash()}"
            >
                {$registrar->getControl()->create()}

                <input type="hidden" name="registrar" value="{$registrar->getHash()}"/>
                <input type="hidden" name="registration" value="1"/>
                <input type="hidden" name="registration_id" value="{$registrationId}"/>
            </form>
            {/foreach}

            {if !$socialRegistrars->isEmpty() && !$mailRegistrars->isEmpty()}
            <div class="quiqqer-frontendUsers-controls-registration-or">
                <span class="quiqqer-frontendUsers-controls-registration-or-text">
                    {locale group="quiqqer/frontend-users" var="control.registration.or"}
                </span>
            </div>
            {/if}

            <!-- mail registrations -->
            {foreach $mailRegistrars as $registrar}
            <!-- social registrations -->
            <form action=""
                  method="POST"
                  class="quiqqer-frontendUsers-controls-registration-registrar"
                  data-registrar="{$registrar->getHash()}"
            >
                {$registrar->getControl()->create()}

                <input type="hidden" name="registrar" value="{$registrar->getHash()}"/>
                <input type="hidden" name="registration" value="1"/>
                <input type="hidden" name="registration_id" value="{$registrationId}"/>
            </form>
            {/foreach}


            {if $termsOfUseRequired}
            <div class="quiqqer-frontendUsers-controls-registration-termsOfUse"
                {if $termsOfUseSiteId} data-termsofusesiteid="{$termsOfUseSiteId}"{/if}
                {if $privacyPolicySiteId} data-privacypolicysiteid="{$privacyPolicySiteId}"{/if}
            >
                <label>
                    <input  name="termsOfUse" type="checkbox"{if $termsOfUseAccepted} checked{/if}/>
                    <span>
                        {$termsOfUseLabel}
                    </span>
                </label>
            </div>
            {/if}
        </div>
        {/if}
    {/if}
{/if}